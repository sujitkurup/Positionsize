<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>V&S Intraday Postion Size Calculator</title>
<style>
  :root{
    --bg:#0b0f14; --panel:#121923; --ink:#e9f2ff; --muted:#97a7bd;
    --accent:#22d3ee; --ok:#4ade80; --warn:#f97316; --line:#1e2a39;
  }
  *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
  body{margin:0;background:#0b0f14;color:var(--ink)}
  .wrap{max-width:980px;margin:28px auto;padding:0 16px}
  h1{margin:0 0 12px;font-weight:800;font-size:clamp(18px,2.6vw,28px)}
  .grid{display:grid;gap:14px}
  @media (min-width:880px){ .grid{grid-template-columns:1.1fr 1fr} }
  .card{background:var(--panel);border:1px solid var(--line);border-radius:14px;padding:16px;box-shadow:0 10px 18px rgba(0,0,0,.25)}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  label{font-size:12px;color:var(--muted)}
  input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #2a3543;background:#0c1520;color:var(--ink);outline:none}
  input:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(34,211,238,.18)}
  .pill{display:inline-flex;gap:8px;align-items:center;background:#0e1623;border:1px solid #243042;border-radius:999px;padding:6px 10px;color:var(--muted)}
  .big{font-size:22px;font-weight:800}
  .sub{color:#9fb0c6;font-size:12px}
  .two{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .list{display:grid;gap:8px}
  .item{display:flex;align-items:center;justify-content:space-between;background:#0f1724;border:1px solid #203044;border-radius:10px;padding:10px 12px}
  .item span:first-child{color:#a9bacf}
  .ok{color:var(--ok)}
  .warn{color:var(--warn)}
  .footer{margin-top:10px;color:#90a3bb;font-size:12px}
  .titleRow{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
</style>
</head>
<body>
<div class="wrap">
  <h1>V&amp;S Intraday Postion Size Calculator</h1>

  <div class="grid">
    <!-- Inputs -->
    <div class="card">
      <div class="row">
        <div>
          <label>Capital (₹)</label>
          <input id="capital" type="number" min="0" step="100" value="10000">
        </div>
        <div>
          <label>Stock Price / Entry (₹)</label>
          <input id="price" type="number" min="0" step="0.05" value="250">
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <div>
          <label>Risk on Capital (%)</label>
          <input id="riskPct" type="number" min="0" step="0.1" value="1">
        </div>
        <div>
          <label>SL used for sizing (% of price)</label>
          <input id="slSizePct" type="number" min="0.01" step="0.1" value="1">
        </div>
      </div>

      <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
        <span class="pill">Leverage: <b style="color:#fff;margin-left:4px">2×</b> (fixed)</span>
        <span class="pill">Qty = min( risk-based size, margin capacity )</span>
      </div>

      <div class="footer">Risk-based size uses your Risk % and the chosen SL % for sizing. Margin capacity = (Capital × 2) ÷ Price.</div>
    </div>

    <!-- Summary -->
    <div class="card">
      <div class="titleRow">
        <div class="sub">Quantity according to risk</div>
        <div class="sub">auto-updates</div>
      </div>
      <div id="qty" class="big">—</div>
      <div style="margin-top:8px" class="list">
        <div class="item"><span>Risk on Capital</span> <span id="riskCap">—</span></div>
        <div class="item"><span>Risk / Share (from sizing SL)</span> <span id="riskPerShare">—</span></div>
        <div class="item"><span>Risk-based Size</span> <span id="riskSize">—</span></div>
        <div class="item"><span>Margin Capacity (shares)</span> <span id="marginCap">—</span></div>
        <div class="item"><span>Exposure Used (₹)</span> <span id="exposureUsed">—</span></div>
      </div>
    </div>
  </div>

  <!-- SL & TP columns -->
  <div class="two" style="margin-top:14px">
    <div class="card">
      <div class="titleRow">
        <div class="sub">Stops (from entry)</div>
        <div class="sub">SL options</div>
      </div>
      <div id="slList" class="list"></div>
    </div>
    <div class="card">
      <div class="titleRow">
        <div class="sub">Targets (from entry)</div>
        <div class="sub">TP options</div>
      </div>
      <div id="tpList" class="list"></div>
    </div>
  </div>

  <div class="footer">TPs shown at 1%, 1.5%, 2%, 2.5%, 3%. SLs shown at 0.5%, 1%, 1.5%, 2%.</div>
</div>

<script>
(function(){
  // ----- constants -----
  var LEVERAGE = 2;                 // fixed as requested
  var SL_OPTS = [0.5, 1, 1.5, 2];   // % of price (left column)
  var TP_OPTS = [1, 1.5, 2, 2.5, 3];// % of price (right column)

  // ----- helpers -----
  function byId(id){ return document.getElementById(id); }
  function inr(n){
    if (!isFinite(n)) return '—';
    try {
      return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',maximumFractionDigits:2}).format(n);
    }catch(e){
      return '₹ ' + (Math.round(n*100)/100).toLocaleString();
    }
  }

  // ----- dom -----
  var elCap   = byId('capital');
  var elPx    = byId('price');
  var elRisk  = byId('riskPct');
  var elSLsiz = byId('slSizePct');

  var outQty  = byId('qty');
  var outRiskCap = byId('riskCap');
  var outRPS     = byId('riskPerShare');
  var outRiskSz  = byId('riskSize');
  var outMargin  = byId('marginCap');
  var outExpo    = byId('exposureUsed');

  var slList = byId('slList');
  var tpList = byId('tpList');

  function calc(){
    var capital = parseFloat(elCap.value);
    var price   = parseFloat(elPx.value);
    var riskPct = Math.max(0, parseFloat(elRisk.value));
    var slSize  = Math.max(0.01, parseFloat(elSLsiz.value)); // % used for sizing

    if (!isFinite(capital) || !isFinite(price) || price<=0){ return; }

    var riskOnCap   = capital * (riskPct/100);
    var rps         = price * (slSize/100);          // risk/share from sizing SL
    var riskSize    = rps>0 ? Math.floor(riskOnCap / rps) : 0;
    var marginCap   = Math.floor((capital * LEVERAGE) / price);
    var finalSize   = Math.min(riskSize, marginCap);
    var exposure    = finalSize * price;

    // summary
    outQty.textContent     = String(finalSize);
    outRiskCap.textContent = inr(riskOnCap);
    outRPS.textContent     = inr(rps);
    outRiskSz.textContent  = String(riskSize);
    outMargin.textContent  = String(marginCap);
    outExpo.textContent    = inr(exposure);

    // SL column
    var slHTML = '';
    for (var i=0;i<SL_OPTS.length;i++){
      var p = SL_OPTS[i]/100;
      var slPrice = price*(1-p); // long side; mirror for shorts if needed
      slHTML += '<div class="item"><span>SL '+SL_OPTS[i]+'%</span><span>'+inr(slPrice)+'</span></div>';
    }
    slList.innerHTML = slHTML;

    // TP column
    var tpHTML = '';
    for (var j=0;j<TP_OPTS.length;j++){
      var q = TP_OPTS[j]/100;
      var tpPrice = price*(1+q);
      tpHTML += '<div class="item"><span>TP '+TP_OPTS[j]+'%</span><span>'+inr(tpPrice)+'</span></div>';
    }
    tpList.innerHTML = tpHTML;
  }

  ['input','change'].forEach(function(evt){
    elCap.addEventListener(evt, calc);
    elPx.addEventListener(evt, calc);
    elRisk.addEventListener(evt, calc);
    elSLsiz.addEventListener(evt, calc);
  });
  document.addEventListener('DOMContentLoaded', calc);
  calc();
})();
</script>
</body>
</html>
